<html>
<head>
	<meta charset="utf-8" />
	<style>
	td { border: 1px solid black; width: 42px;height:42px;text-align:center;}
	</style>
</head>
<body id="body">
	<p style="color:red" id="mensagem"></p>
	
<table>
	<tr>
		<td onclick='verificarCelula(this)'></td>
		<td onclick='verificarCelula(this)'>a</td>
		<td onclick='verificarCelula(this)'></td>
	</tr>
	<tr>
		<td onclick='verificarCelula(this)'></td>
		<td onclick='verificarCelula(this)'>5</td>
		<td onclick='verificarCelula(this)'></td>
	</tr>
	<tr>
		<td onclick='verificarCelula(this)'>2</td>
		<td onclick='verificarCelula(this)'>      </td>
		<td onclick="verificarCelula(this)">4</td>
	</tr>
</table>

<a href="#" onclick="reiniciarJogo()">Reiniciar jogo</a>

<script>
var jogador = "";
// função que eh chamada quando clico numa celula da tabela
function verificarCelula (celula){
	// se a celula estiver fazia
	
	// faz pedido de marcação de celula no servidor
	var body = document.getElementById("body")
	// codigos para criar elemento <script src="pedido.js"><//script>
	var novoScript = document.createElement("script")
	novoScript.src="pedido.js"
	body.appendChild(novoScript)
		
	// recebido a resposta do servidor atualiza o tabuleiro
	atualizaTabuleiro()
}

function reiniciarJogo(){
	var tds = document.getElementsByTagName('td')
	for (i=0;i< tds.length; i++) tds[i].innerHTML = ""
}

// função para exibir mensagem no html e não no alert
function mensagem(texto){
	document.getElementById("mensagem").innerHTML = texto;
}

// variavel global
var celulas;

function atualizaTabuleiro(){
	// pega cada valor da variavel celula
	// e coloca nos tds do tabuleiro
	var tdsTabuleiro = document.getElementsByTagName('td');
	// linha 1
	tdsTabuleiro[0].innerHTML = celulas[0][0];
	tdsTabuleiro[1].innerHTML = celulas[0][1];
	tdsTabuleiro[2].innerHTML = celulas[0][2];
	// linha 2
	tdsTabuleiro[3].innerHTML = celulas[1][0];
	tdsTabuleiro[4].innerHTML = celulas[1][1];
	tdsTabuleiro[5].innerHTML = celulas[1][2];
	// linha 3
	tdsTabuleiro[6].innerHTML = celulas[2][0];
	tdsTabuleiro[7].innerHTML = celulas[2][1];
	tdsTabuleiro[8].innerHTML = celulas[2][2];
}

function verificaVencedor() {
  // celulas html com os tds
 // celulas = document.getElementsByTagName('td');
  
  // linhas de possibilidades de ganhador
  var linhas = [
    [0, 1, 2],
    [3, 4, 5],
    [6, 7, 8],
    [0, 3, 6],
    [1, 4, 7],
    [2, 5, 8],
    [0, 4, 8],
    [2, 4, 6],
  ];
  
  // testa para cada uma das possibilidades se existe ganhador
  for (var i = 0; i < linhas.length; i++) {
	  var linha = linhas[i];
     var a = linha[0];
	 var b = linha[1];
	 var c = linha[2];
	 var cA = celulas[a];
	 var cB = celulas[b];
	 var cC = celulas[c];
	 if (cA != "" && cA  == cB  && cA  == cC) {
      return cA;
    }
  }
  return "";
}

// reinicia o jogo ao carregar a pagina.
reiniciarJogo();

</script>
</body>

